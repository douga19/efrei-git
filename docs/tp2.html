<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>tp2 – Versionning et Repository (xin206 - xdev206)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-36f215d6689654f6cc702cf3f4f6bb39.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./assets/images/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Versionning et Repository (xin206 - xdev206)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-cours" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Cours</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-cours">    
        <li>
    <a class="dropdown-item" href="./cours1.html">
 <span class="dropdown-text">Cours 1 - Introduction au versionnage</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./cours2.html">
 <span class="dropdown-text">Cours 2 - L’historique des commits</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./cours3.html">
 <span class="dropdown-text">Cours 3 - Branches et Fusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./cours4.html">
 <span class="dropdown-text">Cours 4 - Travailler avec un dépôt distant</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-tps" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">TPs</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-tps">    
        <li>
    <a class="dropdown-item" href="./tp1.html">
 <span class="dropdown-text">TP1 - Premiers pas avec Git</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tp2.html">
 <span class="dropdown-text">TP2 - Explorer l’historique des commits, annuler des modifications</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tp3.html">
 <span class="dropdown-text">TP3 - Branches et Fusion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./tp4.html">
 <span class="dropdown-text">TP4 - Programming quotes (collaborer sur GitHub)</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contenu</h2>
   
  <ul>
  <li><a href="#tp2---explorer-lhistorique-des-commits-annuler-des-modifications" id="toc-tp2---explorer-lhistorique-des-commits-annuler-des-modifications" class="nav-link active" data-scroll-target="#tp2---explorer-lhistorique-des-commits-annuler-des-modifications">TP2 - Explorer l’historique des commits, annuler des modifications</a>
  <ul class="collapse">
  <li><a href="#exercice-1---initialisation" id="toc-exercice-1---initialisation" class="nav-link" data-scroll-target="#exercice-1---initialisation">Exercice 1 - Initialisation</a></li>
  <li><a href="#exercice-2---ajout-dune-fonction-de-division" id="toc-exercice-2---ajout-dune-fonction-de-division" class="nav-link" data-scroll-target="#exercice-2---ajout-dune-fonction-de-division">Exercice 2 - Ajout d’une fonction de division</a></li>
  <li><a href="#exercice-3---historique-condensé" id="toc-exercice-3---historique-condensé" class="nav-link" data-scroll-target="#exercice-3---historique-condensé">Exercice 3 - Historique condensé</a></li>
  <li><a href="#exercice-4---oups-nous-avons-fait-une-erreur" id="toc-exercice-4---oups-nous-avons-fait-une-erreur" class="nav-link" data-scroll-target="#exercice-4---oups-nous-avons-fait-une-erreur">Exercice 4 - Oups, nous avons fait une erreur</a></li>
  <li><a href="#exercice-5---annuler-des-modifications-avec-git-checkout" id="toc-exercice-5---annuler-des-modifications-avec-git-checkout" class="nav-link" data-scroll-target="#exercice-5---annuler-des-modifications-avec-git-checkout">Exercice 5 - Annuler des modifications avec <code>git checkout</code></a></li>
  <li><a href="#exercice-6---annuler-des-modifications-avec-git-reset" id="toc-exercice-6---annuler-des-modifications-avec-git-reset" class="nav-link" data-scroll-target="#exercice-6---annuler-des-modifications-avec-git-reset">Exercice 6 - Annuler des modifications avec <code>git reset</code></a></li>
  <li><a href="#exercice-7---annuler-des-modifications-avec-git-revert" id="toc-exercice-7---annuler-des-modifications-avec-git-revert" class="nav-link" data-scroll-target="#exercice-7---annuler-des-modifications-avec-git-revert">Exercice 7 - Annuler des modifications avec <code>git revert</code></a></li>
  <li><a href="#exercice-8---intégration-des-modifications" id="toc-exercice-8---intégration-des-modifications" class="nav-link" data-scroll-target="#exercice-8---intégration-des-modifications">Exercice 8 - Intégration des modifications</a></li>
  <li><a href="#exercice-9---bilan-et-complétion-du-fichier-reponses.md" id="toc-exercice-9---bilan-et-complétion-du-fichier-reponses.md" class="nav-link" data-scroll-target="#exercice-9---bilan-et-complétion-du-fichier-reponses.md">Exercice 9 - Bilan et complétion du fichier <code>reponses.md</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="tp2---explorer-lhistorique-des-commits-annuler-des-modifications" class="level1">
<h1>TP2 - Explorer l’historique des commits, annuler des modifications</h1>
<section id="exercice-1---initialisation" class="level2">
<h2 class="anchored" data-anchor-id="exercice-1---initialisation">Exercice 1 - Initialisation</h2>
<ol type="1">
<li><p>Dans le répertoire <code>xcs310</code> créez un répertoire <code>tp2</code> et initialisez-y un dépôt git vide. Lors de ce TP nous allons travailler avec le dépôt <code>tp2</code>. Pour ce faire nous allons écrire un petit programme python qui fera office d’une petite calulatrice basique.</p></li>
<li><p>Assurez-vous que vous êtes bien à la racine du répertoire <code>tp2</code> puis créez un fichier <code>reponses.md</code> dans lequel vous répondrez aux questions de ce TP. Créez également un fichier <code>.gitignore</code> et faîtes en sorte que Git ignore le fichier <code>reponses.md</code> pour le moment.</p></li>
</ol>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Indication
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notez au fur et à mesure vos réponses dans le fichier <code>reponses.md</code>. Vous pouvez également y noter les commandes que nous utiliserons dans ce TP.</p>
</div>
</div>
<ol start="3" type="1">
<li><p>Toujours dans le répertoire <code>tp2</code>, créez deux fichiers <code>operation.py</code> et <code>calc.py</code> qui contiendront respectivement les lignes de python ci-après.</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>operation.py</strong></pre>
</div>
<div class="sourceCode" id="cb1" data-filename="operation.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> add(a, b):</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> subtract(a, b):</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">-</span> b</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> multiply(a, b):</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>calc.py</strong></pre>
</div>
<div class="sourceCode" id="cb2" data-filename="calc.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> operation <span class="im">import</span> <span class="op">*</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">"__main__"</span>:</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="va">True</span>:</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>        input_str <span class="op">=</span> <span class="bu">input</span>(<span class="st">"Enter the calculation (in the format 'num1 operation num2', or 'exit' to exit): "</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> input_str <span class="op">==</span> <span class="st">"exit"</span>:</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        num1, operation, num2 <span class="op">=</span> input_str.split()</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>        num1 <span class="op">=</span> <span class="bu">int</span>(num1)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>        num2 <span class="op">=</span> <span class="bu">int</span>(num2)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> operation <span class="op">==</span> <span class="st">'+'</span>:</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(num1, <span class="st">"+"</span>, num2, <span class="st">"="</span>, add(num1, num2))</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> operation <span class="op">==</span> <span class="st">'-'</span>:</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(num1, <span class="st">"-"</span>, num2, <span class="st">"="</span>, subtract(num1, num2))</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elif</span> operation <span class="op">==</span> <span class="st">'*'</span>:</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(num1, <span class="st">"*"</span>, num2, <span class="st">"="</span>, multiply(num1, num2))</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="st">"Invalid operation"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Observez le contenu des deux fichiers précédents. Vous devrez être en mesure de comprendre le fonctionnement de notre calculatrice. Exécutez le fichier <code>calc.py</code> pour vous assurer que tout fonctionne correctement.</p></li>
<li><p>Ajoutez une ligne dans le fichier <code>.gitignore</code> pour ignorer le répertoire <code>__pycache__</code>.</p></li>
<li><p>Ajoutez tous les nouveaux fichiers à la zone d’index, puis créez un commit avec le message <code>"Initial commit"</code>.</p></li>
<li><p>Visualisez l’historique des commits avec la commande <code>git log</code>. Vous devriez voir apparaître le commit que vous venez de créer. Copiez ensuite la réponse de votre <code>git log</code> dans <code>reponse.md</code>.</p></li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Pensez à mettre un petit commentaire contenant le numéro de la question pour chaque réponse dans le fichier <code>reponses.md</code>.</p>
</div>
</div>
<ol start="8" type="1">
<li><p>Nous allons désormais taguer cette version de notre programme. Pour ce faire, créez un tag <code>v1.0</code> sur le dernier commit avec la commande:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git tag v1.0</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Regardez à nouveau l’historique des commits avec la commande <code>git log</code>. Vous devriez voir apparaître le tag que vous venez de créer. Copiez ensuite la réponse de votre <code>git log</code> dans <code>reponse.md</code>. Quelles différences remarquez vous entre ce <code>log</code> et celui de la question 7 ?</p></li>
</ol>
</section>
<section id="exercice-2---ajout-dune-fonction-de-division" class="level2">
<h2 class="anchored" data-anchor-id="exercice-2---ajout-dune-fonction-de-division">Exercice 2 - Ajout d’une fonction de division</h2>
<ol type="1">
<li><p>Nous allons désormais ajouter une nouvelle fonctionnalité à notre calculatrice. Pour ce faire, ajoutez les lignes de code suivantes à la fin du fichier <code>operation.py</code>:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>operation.py</strong></pre>
</div>
<div class="sourceCode" id="cb4" data-filename="operation.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> divide(a, b):</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">/</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Modifiez ensuite le fichier <code>calc.py</code> pour prendre en compte cette nouvelle fonctionnalité: ajoutez les lignes de code suivantes après la ligne 20 du fichier <code>calc.py</code>:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>calc.py</strong></pre>
</div>
<div class="sourceCode" id="cb5" data-filename="calc.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> operation <span class="op">==</span> <span class="st">'/'</span>:</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(num1, <span class="st">"/"</span>, num2, <span class="st">"="</span>, divide(num1, num2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></li>
<li><p>Exécutez à nouveau le fichier <code>calc.py</code> pour vous assurer que tout fonctionne correctement. Une fois que c’est le cas, ajoutez tous les fichiers modifiés à la zone d’index, puis créez un commit avec le message <code>"Add divide function"</code>.</p></li>
<li><p>Visualisez l’historique des commits avec la commande <code>git log</code>. Vous devriez voir apparaître le commit que vous venez de créer. Copiez ensuite la réponse de votre <code>git log</code> dans <code>reponse.md</code>.</p></li>
<li><p>Comparez alors votre dernier <code>log</code> avec celui de la question 9 de l’exercice précédent. Que remarquez-vous ? Déduire le rôle de la référence <code>HEAD</code> dans Git ainsi que le rôle des tags.</p></li>
</ol>
</section>
<section id="exercice-3---historique-condensé" class="level2">
<h2 class="anchored" data-anchor-id="exercice-3---historique-condensé">Exercice 3 - Historique condensé</h2>
<ol type="1">
<li><p>La commande <code>git log</code> permet d’afficher l’historique des commits. Cependant, il est possible de condenser cet historique en affichant uniquement les informations essentielles de chaque commit. Testez alors les commandes suivantes et observez leurs différences:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--all</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--decorate</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--oneline</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Copiez ensuite les réponses de ces <code>log</code> dans <code>reponse.md</code>.</p></li>
<li><p>Essayez maintenant de combiner ces commandes pour afficher un historique condensé. Copiez ensuite la réponse de votre <code>git log</code> dans <code>reponse.md</code>. Puis testez enfin la commande suivante:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git log <span class="at">--all</span> <span class="at">--decorate</span> <span class="at">--oneline</span> <span class="at">--graph</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Notez également réponse de cette commande dans <code>reponse.md</code>.</p></li>
<li><p>Git permet de créer ce que l’on appelle des alias. Ces alias permettent de créer des commandes personnalisées. Par exemple, nous pouvons créer un alias <code>git adog</code> qui affichera l’historique des commits de manière condensée (<code>adog</code> pour <code>all</code>, <code>decorate</code>, <code>oneline</code>, <code>graph</code>). Pour ce faire, exécutez la commande suivante:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git config <span class="at">--global</span> alias.adog <span class="st">"log --all --decorate --oneline --graph"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Testez ensuite votre nouvel alias avec la commande <code>git adog</code>. Désormais, vous pouvez utiliser <code>git adog</code> à la place de <code>git log --all --decorate --oneline --graph</code>.</p></li>
</ol>
</section>
<section id="exercice-4---oups-nous-avons-fait-une-erreur" class="level2">
<h2 class="anchored" data-anchor-id="exercice-4---oups-nous-avons-fait-une-erreur">Exercice 4 - Oups, nous avons fait une erreur</h2>
<ol type="1">
<li>Aïe! Nous venons de nous rendre compte que notre fonction <code>divide</code> ne fonctionne pas correctement. En effet, si on divise par 0, notre programme plante.</li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
</div>
<div class="callout-body-container callout-body">
<p>Ces modifications ne sont pas encore à faire tout de suite! Nous allons d’abord créer des branches pour pouvoir travailler dessus.</p>
</div>
</div>
<p>Nous allons résoudre ce problème de la division par 0 en modifiant la fonction <code>divide</code> comme suit:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>operation.py</strong></pre>
</div>
<div class="sourceCode" id="cb9" data-filename="operation.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> divide(a, b):</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a <span class="op">/</span> b</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">ZeroDivisionError</span>:</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="st">"Division by zero is not allowed"</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="va">None</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>et en modifiant le fichier <code>calc.py</code> comme suit à partir de la ligne 20:</p>
<div class="code-with-filename">
<div class="code-with-filename-file">
<pre><strong>calc.py</strong></pre>
</div>
<div class="sourceCode" id="cb10" data-filename="calc.py"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="cf">elif</span> operation <span class="op">==</span> <span class="st">'/'</span>:</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> divide(num1, num2)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> result <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(num1, <span class="st">"/"</span>, num2, <span class="st">"="</span>, result)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li><p>Nous allons effectuer la correction de notre programme de trois manières différentes: une avec la commande <code>git checkout</code>, une avec la commande <code>git reset</code> et une dernière avec la commande <code>git revert</code>. Pour ce faire, nous allons créer trois branches différentes. Créez alors une branche <code>fix-checkout</code>, une branche <code>fix-reset</code> et une branche <code>fix-revert</code> avec les commandes suivantes:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git branch fix-checkout</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git branch fix-reset</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git branch fix-revert</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Visualisez l’historique de votre dépôt grâce à la commande <code>git adog</code> pour vérifier que les trois branches que nous avons créées sont bien présentes et se situent toutes sur le même commit. Copiez ensuite la réponse de votre <code>git adog</code> dans <code>reponse.md</code>.</p></li>
</ol>
</section>
<section id="exercice-5---annuler-des-modifications-avec-git-checkout" class="level2">
<h2 class="anchored" data-anchor-id="exercice-5---annuler-des-modifications-avec-git-checkout">Exercice 5 - Annuler des modifications avec <code>git checkout</code></h2>
<ol type="1">
<li><p>Placez-vous dans la branche <code>fix-checkout</code> avec la commande suivante:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git checkout fix-checkout</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vous devriez voir apparaître le message suivant:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Switched</span> to branch <span class="st">'fix-checkout'</span> <span class="co"># ou l'équivalent en français :)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Visualisez alors le <code>log</code> de votre dépôt grâce à la commande <code>git adog</code>. Dans la réponse de la commande, quelle information vous permet de vérifier que vous vous trouvez bien sur la branche <code>fix-checkout</code> ?</p></li>
<li><p>La dernière version stable de notre programme est la version taguée <code>v1.0</code>. Nous voudrions alors que les fichiers <code>calc.py</code> et <code>operation.py</code> retrouvent leur état de la version <code>v1.0</code>. Exécutez alors la commande suivante:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git checkout v1.0 calc.py operation.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Ouvrez ensuite les fichiers <code>calc.py</code> et <code>operation.py</code> et vérifiez que les modifications que vous avez apportées dans l’exercice 2 ont bien été annulées, c’est-à-dire que notre calculatrice ne gère plus l’opération de division.</p></li>
<li><p>Modifiez ensuite les fichiers <code>calc.py</code> et <code>operation.py</code> pour corriger le problème de la division par 0 comme indiqué dans l’exercice 4. Testez ensuite le programme pour vérifier que tout fonctionne correctement.</p></li>
<li><p>Une fois que c’est fait, ajoutez les fichiers modifiés à la zone d’index, puis créez un commit avec le message <code>"Fix divide function with git checkout"</code>.</p></li>
<li><p>Visualisez l’historique des commits avec la commande <code>git adog</code>. Vous devriez voir apparaître le commit que vous venez de créer. Copiez ensuite la réponse de votre <code>git adog</code> dans <code>reponse.md</code>.</p></li>
</ol>
</section>
<section id="exercice-6---annuler-des-modifications-avec-git-reset" class="level2">
<h2 class="anchored" data-anchor-id="exercice-6---annuler-des-modifications-avec-git-reset">Exercice 6 - Annuler des modifications avec <code>git reset</code></h2>
<ol type="1">
<li><p>Placez-vous dans la branche <code>fix-reset</code> avec la commande suivante:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git checkout fix-reset</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vous devriez voir apparaître le message suivant:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Switched</span> to branch <span class="st">'fix-reset'</span> <span class="co"># ou l'équivalent en français :)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Visualisez alors le <code>log</code> de votre dépôt grâce à la commande <code>git log</code>. Dans le <code>log</code>, quelle information vous permet de vérifier que vous vous trouvez bien sur la branche <code>fix-reset</code> ?</p></li>
<li><p>Effectuez un <code>git status</code> pour vérifier l’état de notre dépôt. Y-a-t-il des fichiers modifiés ? Y-a-t’il des modifications en attente de validation ?</p></li>
<li><p>On souhaite maintenant annuler les modifications apportées dans l’exercice 2. Pour ce faire, exécutez la commande suivante:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git reset <span class="at">--hard</span> HEAD~1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Cette commande permet de revenir au commit précédent en annulant toutes les modifications apportées depuis le dernier commit.</p></li>
<li><p>Observez que les modifications apportées dans l’exercice 2 ont bien été annulées. C’est-à-dire que notre calculatrice ne gère plus l’opération de division et que nous sommes retournés à la version taguée <code>v1.0</code>. Vérifiez ceci en effectuant un <code>git log</code> et que le <code>HEAD</code> et la branche <code>fix-reset</code> pointent bien tous les deux sur le commit tagué <code>v1.0</code>.</p></li>
<li><p>Corriger ensuite le problème de la division par 0 comme indiqué dans l’exercice 4. Testez ensuite le programme pour vérifier que tout fonctionne correctement.</p></li>
<li><p>Une fois que c’est fait, ajoutez les fichiers modifiés à la zone d’index, puis créez un commit avec le message <code>"Fix divide function with git reset"</code>.</p></li>
<li><p>Visualisez l’historique des commits avec la commande <code>git adog</code>. Vous devriez voir apparaître le commit que vous venez de créer. Copiez ensuite la réponse de votre <code>git adog</code> dans <code>reponse.md</code>.</p></li>
</ol>
</section>
<section id="exercice-7---annuler-des-modifications-avec-git-revert" class="level2">
<h2 class="anchored" data-anchor-id="exercice-7---annuler-des-modifications-avec-git-revert">Exercice 7 - Annuler des modifications avec <code>git revert</code></h2>
<ol type="1">
<li><p>Placez-vous dans la branche <code>fix-revert</code> avec la commande suivante:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git checkout fix-revert</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Vous devriez voir apparaître le message suivant:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Switched</span> to branch <span class="st">'fix-revert'</span> <span class="co"># ou l'équivalent en français :)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Visualisez alors le <code>log</code> de votre dépôt grâce à la commande <code>git adog</code>. Dans le <code>log</code>, quelle information vous permet de vérifier que vous vous trouvez bien sur la branche <code>fix-revert</code> ?</p></li>
<li><p>Annulez les modifications apportées dans l’exercice 2 depuis la branche <code>fix-revert</code> avec la commande suivante:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git revert HEAD</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>À votre avis pourquoi avons-nous spécifié <code>HEAD</code> dans la commande <code>git revert</code> ?</p></li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Attention
</div>
</div>
<div class="callout-body-container callout-body">
<p>Après cette commande, Git vous demandera de saisir un message de commit dans l’éditeur de texte par défaut. Si vous avez configuré un éditeur, vous pouvez saisir votre message, enregistrer et quitter l’éditeur de texte et terminer la commande. Sinon Git va ouvrir <code>vim</code> par défaut. Vous devrez alors saisir votre message de commit dans <code>vim</code>. Pour ce faire, appuyez sur la touche <code>i</code> pour passer en mode insertion, saisissez votre message de commit, puis appuyez sur la touche <code>ESC</code> pour sortir du mode insertion. Enfin, saisissez <code>:wq</code> pour enregistrer votre message de commit et quitter l’éditeur de texte.</p>
</div>
</div>
<ol start="3" type="1">
<li><p>Visualisez ensuite l’historique des commits avec la commande <code>git log</code> dans un premier temps. Vous devriez voir apparaître le commit que vous venez de créer.</p></li>
<li><p>Nous venons d’annulez les modifications apportées dans l’exercice 2. Cependant, nous souhaitons toujours que notre calculatrice gère l’opération de division. Corriger alors le problème de la division par 0 comme indiqué dans l’exercice 4. Testez ensuite le programme pour vérifier que tout fonctionne correctement.</p></li>
<li><p>Une fois que c’est fait, ajoutez les fichiers modifiés à la zone d’index, puis créez un commit avec le message <code>"Fix divide function with git revert"</code>.</p></li>
<li><p>Visualisez l’historique des commits avec la commande <code>git adog</code>. Vous devriez voir apparaître le commit que vous venez de créer. Copiez ensuite la réponse de votre <code>git adog</code> dans <code>reponse.md</code>.</p></li>
</ol>
</section>
<section id="exercice-8---intégration-des-modifications" class="level2">
<h2 class="anchored" data-anchor-id="exercice-8---intégration-des-modifications">Exercice 8 - Intégration des modifications</h2>
<p>Nous sommes désormais en mesure d’intégrer la correction de la fonction <code>divide</code> dans la branche <code>main</code>. Nous allons utiliser la commande <code>git merge</code>. Bien que la correction ait été faite dans trois branches différentes, nous allons effectuer un unique <code>merge</code> puisque les corrections apportés sont exactement les mêmes.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remarque
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>merge</code> fera l’objet d’un cours dédié. Nous verrons alors plus en détail son fonctionnement.</p>
</div>
</div>
<ol type="1">
<li><p>Replacez-vous dans la branche principale en exécutant la commande suivante:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git checkout main</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>Vérifiez que <code>HEAD</code> pointe bien sur la branche <code>main</code> avec la commande <code>git adog</code>. Vous devriez voir que les branches <code>fix-checkout</code>, <code>fix-reset</code> et <code>fix-revert</code> pointent toutes sur le commit tagué <code>v1.0</code> et que <code>HEAD</code> pointe sur le commit <code>Add divide function</code>.</p></li>
<li><p>Exécutez la commande suivante pour intégrer les modifications de la branche <code>fix-checkout</code> dans la branche <code>main</code>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> git merge fix-revert</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
</ol>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Remarque
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vous devriez avoir un message indiquant que le <code>merge</code> a été effectué en mode fast-forward. Nous verrons plus tard ce que cela signifie.</p>
</div>
</div>
<ol start="4" type="1">
<li>Taguez enfin le dernier commit comme étant la version <code>v2.0</code> de notre calculatrice et visualisez l’historique des commits avec la commande <code>git log</code>.</li>
</ol>
</section>
<section id="exercice-9---bilan-et-complétion-du-fichier-reponses.md" class="level2">
<h2 class="anchored" data-anchor-id="exercice-9---bilan-et-complétion-du-fichier-reponses.md">Exercice 9 - Bilan et complétion du fichier <code>reponses.md</code></h2>
<ol type="1">
<li>Nous avons désormais terminé ce TP. Effectuez un <code>git status</code> pour vérifier que tout est en ordre dans la branche principale. Assurez-vous d’avoir bien noté toutes vos réponses dans le fichier <code>reponses.md</code>. Et notez-y les commentaires que vous jugerez utiles sur les différentes commandes que nous avons utilisées dans ce TP.</li>
<li>Retirez ensuite la ligne <code>reponses.md</code> du fichier <code>.gitignore</code>. Sauvegardez puis ajoutez les fichiers <code>.gitignore</code> et <code>reponses.md</code> dans la zone d’index.</li>
<li>Créez enfin un commit avec le message <code>"Solution TP2"</code>.</li>
</ol>
<!-- TODO utiliser VsCode pour modifier les fichiers -->


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>